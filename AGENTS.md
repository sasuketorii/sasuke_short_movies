# AGENTS.md — sasuke_short プロジェクト運用規約（エージェント向け）

このリポジトリでは、執筆ワークフローを次の3段階で運用します。
- 01_メモ → 02_クリーン → 03_原稿

ここに定義する「プロジェクト固有のスラッシュコマンド」を、会話内でユーザーが入力した場合は、本規約に従って実行してください。特に `/research` は最新情報や仕様の変化に敏感なため、必ず web.run を使って調査・出典明記を行います。

## 共通ルール
- 文体は原則「です・ます」。
- ファイル名は `YYYY-MM-DD_スラグ.md`。3段階で同一スラグを維持します。
- 各ファイル先頭にフロントマターを付与します：
  ```yaml
  ---
  title: <タイトル>
  slug: <YYYY-MM-DD_スラグ>
  phase: memo | clean | manuscript
  status: draft | review | final
  tags: [<タグ>, ...]
  created: <YYYY-MM-DD>
  updated: <YYYY-MM-DD>
  source: <前段階の相対パス または 空文字>
  ---
  ```
- 生成物は該当ディレクトリへ保存し、`INDEX.md` を可能なら更新してください（`scripts/gen_index.sh` が利用可能）。
- 既存ファイルがある場合は上書きせず、`-v2`, `-v3` を末尾に付けた新規作成で回避します。

## スラッシュコマンド

### `/memo "タイトル" [タグ,カンマ区切り]`
- 目的: 01_メモに当日ファイルを新規作成（テンプレ適用）。
- 手順:
  1) スラグをタイトルから生成（英数・ハイフン整形）。
  2) `templates/memo.md` を用いて `01_メモ/YYYY-MM-DD_スラグ.md` を作成。
  3) `tags` は引数を配列化（空可）。
  4) 完了後、作成パスを短く報告。
- 備考: ユーザーが明示すれば `scripts/new_memo.sh` の実行を提案し使用しても良い。

### `/research <スラグ|メモのパス|トピック>`
- 目的: メモを元に、信頼できる情報源を調査して 02_クリーン を作成。
- 必須: web.run を使用し、重要事実は出典を5点まで適切に明示。更新の早い情報（価格/仕様/人物/規約等）は必ず確認。
- 手順（厳守）:
  1) 入力がスラグ/パスの場合は元メモを読み、要点を抽出。
  2) web.run で一次情報（公式Docs/ブログ/学術/大手メディア）を優先して収集。
  3) 主要ソースを比較し、相違点があれば並記してバランスを確保。
  4) `templates/clean.md` の構造に沿って再構成（主張→根拠→例→反論/限界→未解決）。
  5) 末尾に「参考URL」を Markdown リンクで列挙（タイトル・ドメイン・URL）。
  6) ファイルを `02_クリーン/YYYY-MM-DD_スラグ.md` に保存。`source` は元メモ相対パス。
- 出力基準:
  - 生成や推測は「推測」と明示。未確定は断定しない。
  - 用語を統一し、重複を削除。見出しだけで流れが追えること。

### `/draft <スラグ|クリーンのパス>`
- 目的: 02_クリーンを読者向け 03_原稿 に変換。
- 手順:
  1) `templates/manuscript.md` に準拠。
  2) リードは120字前後で価値を即提示。
  3) H2/H3 構成、各段落冒頭に主張の要約文を置く。
  4) 比喩は1本まで。冗長表現・語尾連続を除去。
  5) 末尾に「3行サマリ」「次の一歩」。
  6) `03_原稿/YYYY-MM-DD_スラグ.md` に保存。`source` はクリーン相対パス。

## スクリプト利用の方針
- `scripts/new_memo.sh`：メモ作成。
- `scripts/gen_index.sh`：INDEX 更新。
- スクリプトは副作用が小さく、インタラクティブ入力を要求しない形で設計しています。

## 品質チェック（抜粋）
- 02_クリーン：主張/Why/How/例/限界が揃う。未解決は「誰が/何を/どこで/いつまで」。
- 03_原稿：見出しが約束、本文が達成。段落1つ1メッセージ。行動喚起で締める。

